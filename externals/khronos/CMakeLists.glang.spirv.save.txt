


install( DIRECTORY "${CMAKE_CURRENT_LIST_DIR}/include/GL" DESTINATION "include/natus/externals/khronos/include")
install( DIRECTORY "${CMAKE_CURRENT_LIST_DIR}/include/GLES2" DESTINATION "include/natus/externals/khronos/include")
install( DIRECTORY "${CMAKE_CURRENT_LIST_DIR}/include/GLES3" DESTINATION "include/natus/externals/khronos/include")
install( DIRECTORY "${CMAKE_CURRENT_LIST_DIR}/include/KHR" DESTINATION "include/natus/externals/khronos/include")

add_library( gl_headers INTERFACE )
target_include_directories( gl_headers INTERFACE $<BUILD_INTERFACE:${CMAKE_CURRENT_LIST_DIR}/include> )
target_include_directories( gl_headers INTERFACE $<INSTALL_INTERFACE:include/natus/externals/khronos/include> )
install_library( gl_headers ${PROJECT_NAME}-targets )

add_library( gles2_header INTERFACE )
target_include_directories( gles2_header INTERFACE $<BUILD_INTERFACE:${CMAKE_CURRENT_LIST_DIR}/include> )
target_include_directories( gles2_header INTERFACE $<INSTALL_INTERFACE:include/natus/externals/khronos/include> )
install_library( gles2_header ${PROJECT_NAME}-targets )

add_library( gles3_header INTERFACE )
target_include_directories( gles3_header INTERFACE $<BUILD_INTERFACE:${CMAKE_CURRENT_LIST_DIR}/include> )
target_include_directories( gles3_header INTERFACE $<INSTALL_INTERFACE:include/natus/externals/khronos/include> )
install_library( gles3_header ${PROJECT_NAME}-targets )


option( SKIP_GLSLANG_INSTALL "" ON )
option( BUILD_SHARED_LIBS "" OFF )
option( BUILD_TESTING "" OFF )
option( BUILD_EXTERNAL "" OFF )

add_subdirectory( glslang )
add_subdirectory( SPIRV-Cross )

if( TARGET glslang )
set_target_properties( glslang PROPERTIES FOLDER "natus/externals/khronos/glslang/glslang" )
endif()
if( TARGET glslang-default-resource-limits )
if( MSVC )
    target_compile_options( glslang-default-resource-limits PRIVATE /wd4005 )
endif()
set_target_properties( glslang-default-resource-limits PROPERTIES FOLDER "natus/externals/khronos/glslang/glslang" )
endif()
if( TARGET OGLCompiler )
set_target_properties( OGLCompiler PROPERTIES FOLDER "natus/externals/khronos/glslang/glslang" )
endif()
if( TARGET OSDependent )
set_target_properties( OSDependent PROPERTIES FOLDER "natus/externals/khronos/glslang/glslang" )
endif()
if( TARGET SPIRV )
set_target_properties( SPIRV PROPERTIES FOLDER "natus/externals/khronos/glslang/glslang" )
endif()
if( TARGET SPVRemapper )
set_target_properties( SPVRemapper PROPERTIES FOLDER "natus/externals/khronos/glslang/glslang" )
endif()
if( TARGET HLSL )
set_target_properties( HLSL PROPERTIES FOLDER "natus/externals/khronos/glslang/hlsl" )
endif()
if( TARGET glslangValidator )
set_target_properties( glslangValidator PROPERTIES FOLDER "natus/externals/khronos/glslang/tools" )
endif()
if( TARGET spirv-remap )
set_target_properties( spirv-remap PROPERTIES FOLDER "natus/externals/khronos/glslang/tools" )
endif()

if( TARGET spirv-cross )
set_target_properties( spirv-cross PROPERTIES FOLDER "natus/externals/khronos/spirv-cross" )
endif()
if( TARGET spirv-cross-c )
set_target_properties( spirv-cross-c PROPERTIES FOLDER "natus/externals/khronos/spirv-cross" )
endif()
if( TARGET spirv-cross-core )
set_target_properties( spirv-cross-core PROPERTIES FOLDER "natus/externals/khronos/spirv-cross" )
endif()
if( TARGET spirv-cross-cpp )
set_target_properties( spirv-cross-cpp PROPERTIES FOLDER "natus/externals/khronos/spirv-cross" )
endif()
if( TARGET spirv-cross-glsl )
set_target_properties( spirv-cross-glsl PROPERTIES FOLDER "natus/externals/khronos/spirv-cross" )
endif()
if( TARGET spirv-cross-hlsl )
set_target_properties( spirv-cross-hlsl PROPERTIES FOLDER "natus/externals/khronos/spirv-cross" )
endif()
if( TARGET spirv-cross-msl )
set_target_properties( spirv-cross-msl PROPERTIES FOLDER "natus/externals/khronos/spirv-cross" )
endif()
if( TARGET spirv-cross-reflect )
set_target_properties( spirv-cross-reflect PROPERTIES FOLDER "natus/externals/khronos/spirv-cross" )
endif()
if( TARGET spirv-cross-util )
set_target_properties( spirv-cross-util PROPERTIES FOLDER "natus/externals/khronos/spirv-cross" )
endif()

unset( BZRCOMMAND CACHE )
unset( CVSCOMMAND CACHE )
unset( GITCOMMAND CACHE )
unset( MAKECOMMAND CACHE )
unset( P4COMMAND CACHE )
unset( SITE CACHE )
unset( SVNCOMMAND CACHE )
unset( CVS_UPDATE_OPTIONS CACHE )
unset( DART_TESTING_TIMEOUT CACHE )
unset( PYTHON_EXECUTABLE CACHE )
unset( SKIP_GLSLANG_INSTALL CACHE )
unset( USE_CCACHE CACHE )
unset( BZRCOMMAND CACHE )
unset( BZRCOMMAND CACHE )

unset( BUILD_EXTERNAL CACHE )
unset( BUILD_SHARED_LIBS CACHE )
unset( BUILD_TESTING CACHE )

unset( COVERAGE_COMMAND CACHE )
unset( COVERAGE_EXTRA_FLAGS CACHE )

unset( CTEST_SUBMIT_RETRY_COUNT CACHE )
unset( CTEST_SUBMIT_RETRY_DELAY CACHE )

unset( ENABLE_CTEST CACHE )
unset( ENABLE_GLSLANG_BINARIES CACHE )
unset( ENABLE_GLSLANG_JS CACHE )
unset( ENABLE_HLSL CACHE )
unset( ENABLE_OPT CACHE )
unset( ENABLE_OPT CACHE )
unset( ENABLE_PCH CACHE )
unset( ENABLE_RTTI CACHE )
unset( ENABLE_SPVREMAPPER CACHE )

unset( LLVM_USE_CRT_DEBUG CACHE )
unset( LLVM_USE_CRT_MINSIZEREL CACHE )
unset( LLVM_USE_CRT_RELEASE CACHE )
unset( LLVM_USE_CRT_RELWITHDEBINFO CACHE )

unset( MEMORYCHECK_COMMAND CACHE )
unset( MEMORYCHECK_SUPPRESSIONS_FILE CACHE )

unset( SLURM_SBATCH_COMMAND CACHE )
unset( SLURM_SRUN_COMMAND CACHE )

# SPIRV-Cross
unset( spirv-cross-glslang CACHE )
unset( spirv-cross-spirv-as CACHE )
unset( spirv-cross-spirv-opt CACHE )
unset( spirv-cross-spirv-val CACHE )
unset( GIT_EXECUTABLE CACHE )
